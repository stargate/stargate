Stargate universe ON Cyber Gaming PC Grand theft auto VI Systems support profile.                                                                                                                                                                                                                                                                                                                                                                                                          .            From b9d39dc0d5cbb03080ba730a03e8e8f1f4f10943 Mon Sep 17 00:00:00 2001
From: Robert Sese <sese@github.com>
Date: Tue, 13 Jul 2021 18:09:42 -0500
Subject: [PATCH 1/3] Add workflow to check for app.json edits

---
 .github/workflows/triage-app-json.yml | 35 +++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)
 create mode 100644 .github/workflows/triage-app-json.yml

diff --git a/.github/workflows/triage-app-json.yml b/.github/workflows/triage-app-json.yml
new file mode 100644
index 00000000000..23f08049b9f
--- /dev/null
+++ b/.github/workflows/triage-app-json.yml
@@ -0,0 +1,35 @@
+name: Check for app.json changes
+
+# **What it does**: If someone changes app.json, we fail the check.
+# **Why we have it**: app.json should rarely be edited, so we'll require an admin merge if the file really needs to be changed.
+# **Who does it impact**: Docs engineering and content writers.
+
+on:
+  pull_request_target:
+
+jobs:
+  check-app-json-changes:
+    if: github.repository == 'github/docs-internal' && github.event.pull_request.user.login != 'Octomerger'
+    runs-on: ubuntu-latest
+    steps:
+      - name: Get files changed
+        uses: dorny/paths-filter@eb75a1edc117d3756a18ef89958ee59f9500ba58
+        id: filter
+        with:
+          # Base branch used to get changed files
+          base: 'main'
+
+          # Enables setting an output in the format in `${FILTER_NAME}_files
+          # with the names of the matching files formatted as JSON array
+          list-files: json
+
+          # Returns list of changed files matching each filter
+          filters: |
+            notAllowed:
+              - 'app.json'
+
+      - name: Fail if app.json was changed
+        if: ${{ steps.filter.outputs.notAllowed == 'true' }}
+        run: |
+          echo "Please admin merge if you really need to update app.json!"
+          exit 1
\ No newline at end of file

From 00f65065b3df0daad9066ae01acebb71c590c96d Mon Sep 17 00:00:00 2001
From: Robert Sese <robert.sese@gmail.com>
Date: Wed, 14 Jul 2021 11:59:01 -0500
Subject: [PATCH 2/3] Use pull_request instead

Co-authored-by: James M. Greene <JamesMGreene@github.com>
---
 .github/workflows/triage-app-json.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/.github/workflows/triage-app-json.yml b/.github/workflows/triage-app-json.yml
index 23f08049b9f..f2fdf822737 100644
--- a/.github/workflows/triage-app-json.yml
+++ b/.github/workflows/triage-app-json.yml
@@ -5,7 +5,7 @@ name: Check for app.json changes
 # **Who does it impact**: Docs engineering and content writers.
 
 on:
-  pull_request_target:
+  pull_request:
 
 jobs:
   check-app-json-changes:
@@ -32,4 +32,4 @@ jobs:
         if: ${{ steps.filter.outputs.notAllowed == 'true' }}
         run: |
           echo "Please admin merge if you really need to update app.json!"
-          exit 1
\ No newline at end of file
+          exit 1

From 6b5e08084e3ee364563a233450770b3b9b09fe91 Mon Sep 17 00:00:00 2001
From: Robert Sese <robert.sese@gmail.com>
Date: Wed, 14 Jul 2021 11:59:32 -0500
Subject: [PATCH 3/3] Use base ref

Co-authored-by: James M. Greene <JamesMGreene@github.com>
---
 .github/workflows/triage-app-json.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/.github/workflows/triage-app-json.yml b/.github/workflows/triage-app-json.yml
index f2fdf822737..1c323f0a1f8 100644
--- a/.github/workflows/triage-app-json.yml
+++ b/.github/workflows/triage-app-json.yml
@@ -17,7 +17,7 @@ jobs:
         id: filter
         with:
           # Base branch used to get changed files
-          base: 'main'
+          base: ${{ github.event.pull_request.base.ref }}
 
           # Enables setting an output in the format in `${FILTER_NAME}_files
           # with the names of the matching files formatted as JSON array
